# 技术栈与工具

本文档记录AI智能体测试项目中使用和调研的技术栈、工具和框架。

---

## 测试框架

### 移动应用自动化测试

#### Appium
- **类型**: 跨平台移动应用自动化测试框架
- **支持平台**: iOS、Android
- **特点**:
  - 支持多种编程语言
  - 基于WebDriver协议
  - 可用于UI状态抽取和遍历
- **应用场景**: 正常行为采集、UI自动化遍历
- **官网**: [appium.io](https://appium.io)

#### Espresso
- **类型**: Android原生UI测试框架
- **支持平台**: Android
- **特点**:
  - Google官方支持
  - 快速可靠的UI测试
  - 支持DOM树访问
- **应用场景**: Android应用UI状态表征、交互测试
- **官网**: [developer.android.com/training/testing/espresso](https://developer.android.com/training/testing/espresso)

#### Detox
- **类型**: React Native端到端测试框架
- **支持平台**: iOS、Android
- **特点**:
  - 专为React Native设计
  - 灰盒测试方法
  - 高可靠性
- **应用场景**: React Native应用的自动化测试
- **官网**: [wix.github.io/Detox](https://wix.github.io/Detox)

---

## AI技术

### 生成式AI

#### Large Language Models (LLM)
- **应用场景**:
  - 上下文理解和异常场景生成
  - 基于约束的异常描述生成
  - 任务意图识别
- **典型模型**:
  - GPT系列
  - Claude
  - LLaMA
- **在项目中的作用**:
  - 理解UI上下文
  - 生成异常场景描述
  - 辅助注入点决策

#### Diffusion Models
- **应用场景**:
  - 高质量UI界面图像生成
  - 基于条件的异常界面合成
- **典型模型**:
  - Stable Diffusion
  - DALL-E
- **在项目中的作用**:
  - 生成逼真的异常UI截图
  - 保持界面风格一致性

#### GAN (Generative Adversarial Networks)
- **应用场景**:
  - 对抗性UI生成
  - 异常场景图像合成
- **典型架构**:
  - StyleGAN
  - CycleGAN
- **在项目中的作用**:
  - 生成对抗性UI元素
  - 异常场景图像生成

### 异常检测技术

#### Context-Aware Anomaly Detection
- **核心思想**: 利用上下文信息提高异常检测准确性
- **应用领域**:
  - 轨迹异常检测
  - 时间序列异常检测
  - UI行为异常检测
- **在项目中的作用**:
  - 判断异常注入的合理性
  - 评估生成异常的质量

### 其他AI技术

#### 检索增强生成 (RAG)
- **核心思想**: 结合检索和生成提高输出质量
- **应用场景**:
  - 从错误日志检索相似案例
  - 基于历史数据生成异常
- **在项目中的作用**:
  - 提升异常生成的语义合理性
  - 引入真实异常模式

#### 强化学习 (RL)
- **应用场景**:
  - 对抗性异常生成
  - 注入策略优化
- **在项目中的作用**:
  - 训练对抗者生成使Agent失效的异常
  - 优化异常注入决策

---

## 异常生成方法

### 模板驱动方法

#### CutPaste
- **类型**: 基于剪切-粘贴的异常生成
- **特点**:
  - 简单高效
  - 可控性强
- **适用场景**: 视觉异常生成的baseline方法

#### 基于规则的生成
- **方法**: 定义异常规则和约束
- **特点**:
  - 确定性
  - 易于解释
- **适用场景**: 业务逻辑明确的异常场景

### 生成式方法

参见上文"生成式AI"部分

---

## 评估工具与指标

### 图像质量评估

#### LPIPS (Learned Perceptual Image Patch Similarity)
- **用途**: 评估生成图像的感知质量
- **应用**: 评估生成UI的视觉保真度

#### FID (Fréchet Inception Distance)
- **用途**: 评估生成图像分布与真实图像的差异
- **应用**: 评估异常界面生成质量

### 异常检测评估

#### Synthetic AUC
- **用途**: 评估合成异常的可检测性
- **应用**: 衡量生成异常对Agent的影响

#### Cosine Similarity
- **用途**: 评估特征向量相似度
- **应用**: 衡量生成异常与真实异常的相似性

### 合成数据评估

#### Fidelity (保真度)
- **定义**: 合成数据与真实数据的相似程度
- **评估方法**: 统计特征对比、分布距离

#### Utility (效用性)
- **定义**: 合成数据对下游任务的有用程度
- **评估方法**: 在测试任务上的表现

#### Privacy (隐私性)
- **定义**: 是否泄露原始数据信息
- **评估方法**: 隐私攻击成功率（在本项目中可能不适用）

---

## 对抗性测试工具

### Intel Labs Adversarial Image Injection
- **类型**: 对抗性图像注入框架
- **特点**: 开源、可定制
- **应用**: 评估Agent对对抗性UI的鲁棒性

### gMiniWoB
- **类型**: 基于Web的智能体评估环境
- **特点**: 标准化benchmark
- **应用**: 训练和评估对抗性异常生成

### RedTeamCUA
- **类型**: 计算机使用AI智能体的对抗性测试工具
- **特点**: 专注于真实对抗场景
- **应用**: 红队测试、对抗性UI生成

---

## 开发工具

### 编程语言
- **Python**: 主要开发语言（AI模型、自动化脚本）
- **JavaScript/TypeScript**: UI自动化、前端工具
- **Java/Kotlin**: Android原生测试

### 机器学习框架
- **PyTorch**: 深度学习模型开发
- **TensorFlow**: 备选框架
- **Hugging Face Transformers**: LLM应用

### 数据处理
- **Pandas**: 数据分析
- **NumPy**: 数值计算
- **OpenCV**: 图像处理

---

## 技术选型建议

### 正常行为采集阶段
- **推荐**: Appium (跨平台) 或 Espresso (Android专项)
- **理由**: 成熟稳定、社区活跃、文档完善

### 异常生成阶段
- **短期**: 模板驱动 + LLM辅助
- **中期**: 混合架构（约束-生成两级）
- **长期**: 引入Diffusion Models或对抗性生成

### 评估阶段
- **推荐**: Synthetic AUC + 人工评分双轨制
- **理由**: 兼顾自动化和语义合理性

---

## 相关资源

- [学术研究资源](../references/学术研究.md) - 相关论文和研究
- [开源项目资源](../references/开源项目.md) - 开源工具和代码
- [调研文档](../research/) - 技术调研和分析

---

**最后更新**: 2024-12-30
